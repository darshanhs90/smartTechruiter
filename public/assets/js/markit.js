var Markit={};Markit.InteractiveChartApi=function(t,e){this.symbol=t.toUpperCase(),this.duration=e,this.PlotChart()},Markit.InteractiveChartApi.prototype.PlotChart=function(){var t={parameters:JSON.stringify(this.getInputParams())};$.ajax({beforeSend:function(){},data:t,url:"http://dev.markitondemand.com/Api/v2/InteractiveChart/jsonp",dataType:"jsonp",context:this,success:function(t){return!t||t.Message?void console.error("Error: ",t.Message):void console.log(t)},error:function(t,e){console.log(t,e)}})},Markit.InteractiveChartApi.prototype.getInputParams=function(){return{Normalized:!1,NumberOfDays:this.duration,DataPeriod:"Day",Elements:[{Symbol:this.symbol,Type:"price",Params:["ohlc"]},{Symbol:this.symbol,Type:"volume"}]}},Markit.InteractiveChartApi.prototype._fixDate=function(t){var e=new Date(t);return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())},Markit.InteractiveChartApi.prototype._getOHLC=function(t){var e=t.Dates||[],a=t.Elements||[],r=[];if(a[0])for(var i=0,o=e.length;o>i;i++){var n=this._fixDate(e[i]),s=[n,a[0].DataSeries.open.values[i],a[0].DataSeries.high.values[i],a[0].DataSeries.low.values[i],a[0].DataSeries.close.values[i]];r.push(s)}return r},Markit.InteractiveChartApi.prototype._getVolume=function(t){var e=t.Dates||[],a=t.Elements||[],r=[];if(a[1])for(var i=0,o=e.length;o>i;i++){var n=this._fixDate(e[i]),s=[n,a[1].DataSeries.volume.values[i]];r.push(s)}return r},Markit.InteractiveChartApi.prototype.render=function(t){var e=this._getOHLC(t),a=this._getVolume(t),r=[["week",[1]],["month",[1,2,3,4,6]]];$("#chartDemoContainer").highcharts("StockChart",{rangeSelector:{selected:1},title:{text:this.symbol+" Historical Price"},yAxis:[{title:{text:"OHLC"},height:200,lineWidth:2},{title:{text:"Volume"},top:300,height:100,offset:0,lineWidth:2}],series:[{type:"candlestick",name:this.symbol,data:e,dataGrouping:{units:r}},{type:"column",name:"Volume",data:a,yAxis:1,dataGrouping:{units:r}}],credits:{enabled:!1}})};